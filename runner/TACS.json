{
    "repository": "git@github.com:smdogroup/tacs",

    "triggers": [
        "git@github.com:openmdao/mphys"
    ],

    "conda": [
        "python=3.8",
        "numpy=1.18",
        "scipy=1.4",
        "cython",
        "zlib=1.2.11",
        "gxx_linux-64"
    ],

    "anaconda": [
        "openmpi",
        "openblas"
    ],

    "conda-forge": [
        "petsc4py=3.12",
        "lapack",
        "metis"
    ],

    "install": [
    ],

    "postinstall": [
        "pip3 install mpi4py --no-binary mpi4py --user --force --no-cache-dir",
        "export OMPI_MCA_btl=self,tcp",
        "export OMPI_MCA_rmaps_base_oversubscribe=1",
        "export OPTIONAL=default",
        "export INTERFACE=interface",
        "export EXAMPLES=default",
        "export TACS_DIR=`pwd`",
        "export PYTHONPATH=$TACS_DIR:$PYTHONPATH",
        "cp Makefile.in.info Makefile.in",
        "make ${OPTIONAL} TACS_DIR=$TACS_DIR METIS_INCLUDE=-I${CONDA_PREFIX}/include/ METIS_LIB=\"-L${CONDA_PREFIX}/lib/ -lmetis\"",
        "cd $TACS_DIR",
        "make ${INTERFACE}",
        "cd $TACS_DIR/examples",
        "make ${EXAMPLES} TACS_DIR=$TACS_DIR METIS_INCLUDE=-I${CONDA_PREFIX}/include/ METIS_LIB=\"-L${CONDA_PREFIX}/lib/ -lmetis\"",
        "cd $TACS_DIR"
    ],

    "notify": [
        "U02AMFNE3N0"
    ]
}
