{
    "repository": "git@github.com:OpenMDAO/Aviary",

    "triggers": [
        "git@github.com:openmdao/OpenMDAO",
        "git@github.com:openmdao/pyCycle",
        "git@github.com:openmdao/dymos"
    ],

    "conda": [
        "python=3.10",
        "numpy",
        "scipy",
        "matplotlib",
        "pandas"
    ],

    "preinstall": [
        "unset USE_PROC_FILES",
        "pip install git+https://github.com/OpenMDAO/build_pyoptsparse",
        "build_pyoptsparse -s ~/dev/snopt7/src"
    ],

    "dependencies": [
        "testflo",
        "pyxdsm"
    ],

    "postinstall": [
        "cd aviary/xdsm",
        "python run_all.py",
        "cd ../.."
    ],

    "test_cmd": [
        "FAIL1=0",
        "testflo --timeout=120 --show_skipped -o $RUN_NAME.log || FAIL1=$?",
        "FAIL2=0",
        "testflo --timeout=1500 --show_skipped -o $RUN_NAME.bench.log --testmatch=bench_test* || FAIL2=$?",
        "cat $RUN_NAME.bench.log >> $RUN_NAME.log",
        "if [ $FAIL1 || $FAIL2 ]; then",
        "  exit 1",
        "fi"
    ],

    "notify": [
        "UF7E0C7NG",
        "U02BT9BC5",
        "U02BMJF3M"
    ]
}
